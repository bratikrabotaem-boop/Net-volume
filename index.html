<!DOCTYPE html>
<html lang="ru">
<head>
<meta charset="UTF-8">
<title>Candlestick Test</title>

<!-- Chart.js UMD -->
<script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>

<!-- Date adapter -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-adapter-date-fns@3/dist/chartjs-adapter-date-fns.bundle.min.js"></script>

<!-- Financial (candlestick) -->
<script src="https://cdn.jsdelivr.net/npm/chartjs-chart-financial@3.3.0/dist/chartjs-chart-financial.min.js"></script>

<style>
body {
  background: #111;
  margin: 0;
}
canvas {
  width: 100%;
  height: 500px;
}
</style>
</head>

<body>

<canvas id="chart"></canvas>

<script>
(async () => {
  const res = await fetch(
    'https://api.binance.com/api/v3/klines?symbol=BTCUSDT&interval=5m&limit=100'
  );
  const data = await res.json();

  const candles = data.map(k => ({
    x: k[0],
    o: +k[1],
    h: +k[2],
    l: +k[3],
    c: +k[4]
  }));

  new Chart(document.getElementById('chart'), {
    type: 'candlestick',
    data: {
      datasets: [{
        data: candles,
        upColor: '#26a69a',
        downColor: '#ef5350',
        borderColor: '#aaa',
        wickColor: '#aaa'
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      plugins: {
        legend: { display: false }
      },
      scales: {
        x: {
          type: 'time',
          time: { unit: 'minute' },
          grid: { display: false }
        },
        y: {
          position: 'right',
          grid: { color: '#222' }
        }
      }
    }
  });
})();
</script>

</body>
</html>
